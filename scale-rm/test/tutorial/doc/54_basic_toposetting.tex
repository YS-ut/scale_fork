\section{\SecBasicTopoSetting} \label{sec:basic_usel_topo}
%-----------------------------------------------------------------------

SCALE-RMでは地形データに対しモデル下端の格子面を傾斜させて地形を表現するTerrain followingを採用している。
力学計算過程において安定的に計算を実行するためには、この地形の傾斜角度が45度以下でなければならない。
水平の最大格子間隔をDX [m]、鉛直の最小格子間隔をDZ [m]とすると、地形傾斜角度θ [deg]は次の式で計算される。

\[ \theta = \arctan( DZ/DX ) * 180/PI \]

地形の設定は、設定ファイルの\namelist{PARAM_CNVTOPO}の中で設定する。
以下に例を示す。

\noindent {\small {\gt
\ovalbox{
\begin{tabularx}{150mm}{lX}
\verb|&PARAM_CNVTOPO  |            & \\
 \verb|CNVTOPO_name            = "GTOPO30", | & ; 使用する地形データ名\\
 \verb|CNVTOPO_smooth_maxslope = 0.229,     | & ; 許容する最大傾斜角度 [deg]\\
 \verb|CNVTOPO_smooth_local    = .true.,    | & ; 傾斜を緩める範囲を最大傾斜角度を超えた格子のみ行うかどうか \\
 \verb|CNVTOPO_smooth_itelim   = 10000,     | & ; 傾斜を緩める際の反復計算回数 \\
 \verb|CNVTOPO_copyparent      = .false.,   | & ; 緩和領域に親ドメインの地形データのコピーするかどうか \\
\verb|/|\\
\end{tabularx}
}}}\\

使用する地形データの名称を与え、地形データを読み込む。
SCALE-RMではGTOPO30、または国土地理院による高精度地形データ（DEM50M）をサポートしている。

設定された地形傾斜角度を超える傾斜が与えられた地形データ内に検出された場合、
それを設定された地形傾斜角度以下になるように、反復計算を用いて徐々に傾斜を緩めていく。
このとき、傾斜を緩める範囲を最大傾斜角度を超えた格子のみ行うか、計算領域全体で行うかを選択することができる。
前者は、最大傾斜角度以内のシャープな地形構造を残すことができるので、細かな地形表現を望む場合に選択する。
最大傾斜角度が小さい場合、反復計算回数が相当に大きな数になる場合があるので、適宜反復計算の最大回数を調整する。

上記の計算式で分かるように、空間解像度が変化すると許容される最大傾斜角度が変化する。
多段ドメインを用いた計算を行う場合、一般的に娘ドメインのほうが空間解像度が細かく、地形もシャープに表現される。
このとき、緩和領域に挿入されるデータが、このシャープな地形表現に対して不整合を起こすことがある。
これを回避するために、親ドメインの地形データを緩和領域にコピーし、不整合を回避するオプションを設定できる。
親ドメインが存在しない場合はこのオプションを必ず.false.に設定しなければならない。
