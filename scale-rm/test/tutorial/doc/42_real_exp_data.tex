%-------------------------------------------------------%
\section{入力データ(境界データ)の準備} \label{sec:tutrial_real_data}
%-------------------------------------------------------%

現実大気実験のシミュレーションを行う場合、\scalerm 本体に与える
境界値データが必要になる。境界値データとしては表\ref{tab:real_bnd}
が必要である。{\color{blue}青字}は必須の変数、その他は任意である。

\begin{table}[h]
\begin{center}
  \caption{現実大気実験に必要な初期値境界値データ}
  \label{tab:real_bnd}
  \begin{tabularx}{150mm}{llX} \hline
    \multicolumn{3}{l}{地形データ(\scalerm の地形を用意する)}\\ \hline
    & \multicolumn{2}{l}{\color{blue}{標高データ}}\\
    & \multicolumn{2}{l}{\color{blue}{土地利用データ}}\\ \hline
    \multicolumn{3}{l}{初期値境界値データ}\\ \hline
    &  \multicolumn{2}{l}{\color{blue}{親モデルの緯度・経度}}\\
    &  \multicolumn{2}{l}{(3次元大気データ)}\\
    & &  \multicolumn{1}{l}{\color{blue}{東西風速, 南北風速, 気温, 比湿(相対湿度), 気圧, ジオポテンシャル高度}} \\
    &  \multicolumn{2}{l}{(2次元大気データ)}\\
    & & 海面更正気圧, 地上気圧, 10m東西風速, 10m南北風速, 2m気温, 2m比湿(相対湿度) \\
    &  \multicolumn{2}{l}{(2次元陸面データ)}\\
    & &  \multicolumn{1}{l}{親モデルの海陸マップ}\\
    & &  \multicolumn{1}{l}{\color{blue}{地表面温度(Skin temp)}}\\
    & &  \multicolumn{1}{l}{{\color{blue}{親モデル土壌データの深さ情報, 土壌温度}}, 土壌水分(体積含水率 or 飽和度)}\\
    &  \multicolumn{2}{l}{(2次元海面データ)}\\
　　& &  \multicolumn{1}{l}{\color{blue}{海面水温(Skin tempがある場合は省略可)}}\\ \hline
  \end{tabularx}
\end{center}
\end{table}


\subsubsection{地形データと土地利用データ}
標高データと土地利用データは実験設定に従って、
\scalerm のそれぞれの格子点における地形、海陸分布、土地利用を
作成するために使用する。
ユーザーが全球の任意の地域を対象とした計算ができるよう、
フォーマット変換済みの
標高データ USGS(U.S. Geological Survey) のGTOPO30 と、
土地利用データ GLCCv2 を提供している。

\begin{enumerate}
\item データのダウンロード\\
\scalerm 用の地形・土地利用のデータを\\
 \url{http://scale.aics.riken.jp/download/scale_database.tar.gz}\\
より入手し、任意のディレクトリに展開しておく。
\begin{alltt}
  $ tar -zxvf scale_database.tar.gz
\end{alltt}
展開したディレクトリには、地形データと土地利用データが格納されている。
\begin{alltt}
  scale_database/topo/    <- 地形データ
  scale_database/landuse/ <- 土地利用データ
\end{alltt}

\item パスの設定\\
makeを使ったジョブスクリプトを使用する場合には、
展開先のディレクトリを \verb|SCALE_DB| という環境変数に設定しておくことが必須である
(以後、\verb|${SCALE_DB}|と表記)。
\begin{alltt}
  $ export SCALE_DB=''scale_databaseへの絶対パス''
\end{alltt}
\end{enumerate}

\proofcomment{
path\_to\_directory\_of\_scale\_databaseが何を意味しているのかの記述不足
修正しました。
}

\subsubsection{大気・陸面・海面水温データ}
初期値境界値データは4byteバイナリー(\grads 形式、以降''binary形式''と表記する)に変換すれば、
任意のデータを読み込むことが可能である。
基本的に、バイナリーデータはユーザー自身が用意する。
チュートリアルではNCEP FNL(Final) Operational Global Analysis data を使用する方法を示す。
あらかじめ\verb|wgrib|をインストールしておく\footnote{\url{http://www.cpc.ncep.noaa.gov/products/wesley/wgrib.html}}。

\begin{enumerate}
\item データのダウンロード\\
NCARのサイト
\url{http://rda.ucar.edu/datasets/ds083.2/}\\
から、2007年7月14日18時から一日分のgrib1フォーマットのデータ
\begin{alltt}
fnl_20070714_18_00.grib1
fnl_20070715_00_00.grib1
fnl_20070815_06_00.grib1
fnl_20070815_12_00.grib1
\end{alltt}
を\verb|scale-{\version}/scale-rm/test/tutorial/real/tools/|の下にダウンロードする。

\item データフォーマットをgrib形式からbinary形式に変換\\
 \verb|scale-{\version}/scale-rm/test/tutorial/real/tools/| の中にある \verb|convert_grib2grads_FNLgrib1.sh|を実行。

\begin{alltt}
  $ cd scale-{\version}/scale-rm/test/tutorial/real/tools/
  $ sh convert_grib2grads_FNLgrib1.sh
\end{alltt}
成功すれば、下記のファイルが作成される。
\begin{alltt}
 $ ls -al FNL_output/*/*
FNL_output/200707/FNLatm_2007071418.grd
FNL_output/200707/FNLatm_2007071500.grd
FNL_output/200707/FNLatm_2007071506.grd
FNL_output/200707/FNLatm_2007071512.grd
FNL_output/200707/FNLland_2007071418.grd
FNL_output/200707/FNLland_2007071500.grd
FNL_output/200707/FNLland_2007071506.grd
FNL_output/200707/FNLland_2007071512.grd
FNL_output/200707/FNLsfc_2007071418.grd
FNL_output/200707/FNLsfc_2007071500.grd
FNL_output/200707/FNLsfc_2007071506.grd
FNL_output/200707/FNLsfc_2007071512.grd
\end{alltt}
\end{enumerate}

